$(document).ready(function () {
//    $("a.normal-link").hover(function(){
//        var li=$(this).closest('li');
//        var submenu=li.find('.submenu');
//        submenu.addClass('active-link');
//    });
//$(".submenu").each(function(){
//    var width=$( window ).width();
//    $(this).css('width',width);
//    $(this).position.left(0);
//});
    $(".responsive-menu-icon").click(function () {
        var menu_header = $(".responsive-menu-header");
        var menu_side = $(".responsive-menu-side");
        $(this).toggleClass('menu-active');
        menu_header.toggleClass('responsive-menu-header-active');
        menu_side.toggleClass('responsive-menu-side-active');
        if (parseInt(menu_side.position().left) < 0) {

        } else {

        }

    });
    $(window).resize(function () {
        if ($(window).width() <= 800) {
            $(".search-sliders").css('top', $(".responsive-menu-header").height() + 1);
            $(".carousel-inner").css('margin-top', $(".responsive-menu-header").height() + $(".search-sliders").height());
        } else {
            $(".search-sliders").css('top', -225);
            $(".carousel-inner").css('margin-top', 0);
        }
    });
    if ($(window).innerWidth() <= 751) {
        $(".search-sliders").css('top', $(".responsive-menu-header").height() + 1);
        $(".carousel-inner").css('margin-top', $(".responsive-menu-header").height() + $(".search-sliders").height());
    } else {
        $(".search-sliders").css('top', -225);
        $(".carousel-inner").css('margin-top', 0);

    }
    $('#main-nav-main li').click(function () {
        var submenu = $(this).find('.submenu');
        var arrow = $(this).find('.responsive-menu-arrow').find('i');
        if ($(window).innerWidth() <= 751) {
            submenu.toggle();
            arrow.toggleClass('fa-angle-down fa-angle-up');
        }

    });

    $(window).scroll(function () {
        var nav = $("#main-nav");
        var height = $(window).scrollTop();
        if (!$(".responsive-menu-header").is(":visible")) {
            if (height > 150) {
                if (nav.hasClass("main-nav-normal")) {
                    nav.hide();
                    nav.show();
                    nav.removeClass("main-nav-normal");
                    nav.addClass("main-nav-fixed bounceInLeft");
                }

            } else {
                if (nav.hasClass("main-nav-fixed")) {
                    nav.removeClass("main-nav-fixed");
                    nav.removeClass("bounceInLeft");
                    nav.addClass("main-nav-normal");
                }
            }
        }

    });

    $("#transfer-type").change(function () {
        var itValue = $(this).val();
        var pax_no = $(this).closest("form").find("#pax_no");
        if (itValue === "type_limousine") {
            pax_no.attr("value", 1);
            pax_no.attr("min", 1);
            pax_no.attr("max", 3);
        } else if (itValue === "type_van") {
            pax_no.attr("value", 4);
            pax_no.attr("min", 4);
            pax_no.attr("max", 9);
        } else if (itValue === "type_coaster") {
            pax_no.attr("value", 10);
            pax_no.attr("min", 10);
            pax_no.attr("max", 16);
        } else if (itValue === "type_bus") {
            pax_no.attr("value", 17);
            pax_no.attr("min", 17);
            pax_no.attr("max", 45);
        }
    });


    $("#responsive-menu").click(function () {
        var menuBar = $("#main-nav");
        var links = $("#main-nav-main");
        //alert(links.position().left);
        if (links.position().left >= 0) {
            menuBar.css("left", "0px");
            links.css("left", "-80%");
            $("body").css("overflow-y", "scroll");
            menuBar.find("i").removeClass("fa-times").addClass("fa-bars");
        } else {
            menuBar.css("left", "80%");
            links.css("left", "0px");
            $("body").css("overflow-y", "hidden");
            menuBar.find("i").removeClass("fa-bars").addClass("fa-times");
        }


    });
    $("iframe#youtube").each(function () {
        var parentDiv = $(this).closest("div");
        var selfWidth = parentDiv.width();
        $(this).attr("width", selfWidth);
    });
    $("input#welcome-search").keyup(function () {
        var inputVal = $(this).val();
        var form = $(this).closest('form');
        var link = form.attr('action');
        $.ajax({
            type: "get",
            url: link,

            data: {text: inputVal},
            success: function (response) {
                $("#search-result").show();
                $("#search-result").html(response);
            }

        });
    });
    $("#dist_from").change(function () {

        var form = $("#getDestFrom");
        form.submit();
//        var link = $(this).attr("data-input");
//        var dist_to = $("#dist_to");
//        var loading_img = $(".loading-small");
//        loading_img.show();
//        $.ajax({
//            url: link,
//            type: "get",
//            data: {dist_from: dist_from},
//            success: function(response) {
//                dist_to.html(response);
//                loading_img.fadeOut();
//            }
//
//        });
    });
    $("#getDestFrom").submit(function (event) {
        event.preventDefault();
        var dist_from = $("#dist_from").val();
        var link = $(this).attr("action");
        var dist_to = $("#dist_to");
        var loading_img = $(".loading-small");
        loading_img.show();
        $.ajax({
            url: link,
            type: "get",
            data: {dist_from: dist_from},
            success: function (response) {
                dist_to.html(response);
                loading_img.fadeOut();
            }

        });

    });
    $("#first_amount").keyup(function () {
        // first Price
        var itVal = parseFloat($(this).val());
        var itPrice = parseFloat($(this).closest('form').find('#first-price').text());
        //second Price
        var secVal = parseFloat($("#second_amount").val());
        var secPrice = parseFloat($(this).closest('form').find('#sec-price').text());
        // count total
        var totalSpan = $(this).closest('form').find('#total');
        var totalPrice = (itVal * itPrice) + (secVal * secPrice);
        totalSpan.html(totalPrice.toFixed(2));


    });
    $("#second_amount").keyup(function () {
        // first Price
        var itVal = parseFloat($(this).val());
        var itPrice = parseFloat($(this).closest('form').find('#sec-price').text());
        //second Price
        var secVal = parseFloat($("#first_amount").val());
        var secPrice = parseFloat($(this).closest('form').find('#first-price').text());
        // count total
        var totalSpan = $(this).closest('form').find('#total');
        var totalPrice = (itVal * itPrice) + (secVal * secPrice);
        totalSpan.html(totalPrice.toFixed(2));


    });
    $("a.seemore").click(function (event) {
        event.preventDefault();
        var showless = $(this).closest('.row').find('a.showless');
        var reset_text = $(this).closest('.row').find('span.reset-text');
        $(this).hide();
        showless.fadeIn();
        reset_text.fadeIn();
    });
    $("a.showless").click(function (event) {
        event.preventDefault();
        var showmore = $(this).closest('.row').find('a.seemore');
        var reset_text = $(this).closest('.row').find('span.reset-text');
        $(this).hide();
        showmore.fadeIn();
        reset_text.hide();
    });
});
//function calculatePrice(elementAmount,elementPrice){
//    var itVal=parseFloat(elementAmount.val());
//    var itPrice=parseFloat(elementAmount.closest('form').find('#first-price').text());
//    
//}